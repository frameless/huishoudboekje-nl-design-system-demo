test-frontend:
  stage: test
  image: node:lts-alpine
  variables:
    NPM_CACHE_DIR: ${CI_PROJECT_DIR}/.npm-cache
  cache:
    key: "${CI_COMMIT_REF_SLUG}__${CI_JOB_NAME}"
    paths:
      - ${NPM_CACHE_DIR}
  only:
    - branches@commonground/huishoudboekje/app-new
  script:
    - cd ./frontend/app
    - npm ci --cache ${NPM_CACHE_DIR} --prefer-offline --no-progress --color=false --quiet
    - npm run lint

# Test Backend
#test-backend:
#  stage: build
#  image: docker
#  variables:
#    APP_NAME: backend
#    DIRECTORY: backend
#  only:
#    - branches@commonground/huishoudboekje/app-new
#  script:
#    - npm ci --silent
#    - npm run test
